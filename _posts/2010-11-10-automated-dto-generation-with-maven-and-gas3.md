---
layout: post
title: Automated DTO Generation with Maven and GAS3
created: 1289374750
author: liorb
permalink: /js/automated-dto-generation-maven-and-gas3
tags:
- JS
- maven
- GAS3
- flex
- DTO
- build
---
<p>&nbsp;</p>
<p>In Recent years Flex has become the ideal client solution for Java server based projects. Flex compliments Java in many ways and has many similarities to Java. These include, the syntax, the OOP approach and many other features of the two languages that are similar.<br />
<br />
In this tutorial, I will demonstrate one aspect of the Flex Java integration by covering the earliest stage of the development process, which is the build and infrastructure creation. In future posts I will cover later stages of the development.</p>
<p>&nbsp;</p>
<p><em><strong>VO\DTO Generation</strong></em><br />
The VO generation process converts the existing server side entity classes to client side entity classes. At the end of the process each server side DTO\Entity class will have a client side corresponding class, enabling easy communication between the client and server.</p>
<p>&nbsp;</p>
<p><em><strong>Using GAS3 to Generate AS3</strong></em><br />
<a href="http://www.graniteds.org/confluence/display/DOC/3.+Gas3+Code+Generator">GAS3</a> is one the modules of <a href="http://www.graniteds.org/confluence/pages/viewpage.action?pageId=229378">GraniteDS</a>, GDS is a comprehensive Flex remoting framework which will not be covered in this post. GAS3 is responsible for the Java to AS3 VO (or DTO) generation, it reads the domain Java objects and generates the corresponding AS classes. Usually GAS3 is used in conjunction with other GraniteDS modules. However, as I'm about to demonstrate, GAS3 can also be used separately from GDS in conjunction with different remoting frameworks such as BlazeDS or even different integration layers like SOAP and REST services.<br />
<br />
GAS3 is created on top of the Groovy templates. It can be customized and used to generate different derivatives of Vos.</p>
<p>&nbsp;</p>
<p><em><strong>MyCRM Sample Application</strong></em><br />
The sample mini application shown below, is a CRM app (MyCRM). responsible for managing customer information ,it contains three sub projects, as follows:</p>
<p>&nbsp;</p>
<p><strong>mycrm-core</strong>: The Java server, responsible for the server side business logic. In our sample it contains only a number of basic entities.<br />
<strong>mycrm-parent</strong>: Maven's parent project, which serves as a parent POM.<br />
<strong>mycrm-flex-domain</strong>: The Flex side of the domain objects, packaged as an SWC which may be used by any Flex application.<br />
<br />
The entire code for the sample application may be downloaded from <a href="http://www.box.net/shared/nivs55x35y">here</a></p>
<p>&nbsp;</p>
<p><em><strong>The GAS3 Maven\Ant Build Tag</strong></em></p>
<p><span style="color: rgb(255, 0, 0);"><em>update (thanks to <a href="http://mayboroda.blogspot.com/">velo</a>) : it looks like flexmojos now has <a href="https://docs.sonatype.org/display/FLEXMOJOS/Generator+Mojo">GAS3 integration</a> so you don't need to use the Ant runner tag </em></span></p>
<p><br />
In the pom.xml under mycrm-flex-domain, the following section is responsible for the GAS3 operation:<br />
&nbsp;</p>
<pre class="brush: xhtml;" title="code">
&lt;gas3 outputdir=&quot;../mycrm-flex-domain/src&quot; tide=&quot;true&quot;
baseoutputdir=&quot;../mycrm-flex-domain/src-autogenerated&quot;
entitybasetemplate=&quot;../mycrm-flex-domain/gsp/MyCRMEntityBaseTemplate.gsp&quot;
beanbasetemplate=&quot;../mycrm-flex-domain/gsp/MyCRMEntityBaseTemplate.gsp&quot;&gt;
&lt;classpath&gt;
&lt;pathelement
location=&quot;../mycrm-core/target/classes&quot; /&gt;
&lt;/classpath&gt;
&lt;fileset
dir=&quot;${project.basedir}/../mycrm-core/target/classes&quot;&gt;
&lt;include name=&quot;net/flexonjava/examples/mycrm/domain**/*.class&quot; /&gt;
&lt;/fileset&gt;
&lt;/gas3&gt;</pre>
<p><br />
<br />
Many of the tags above are overrides for the default configurations, you can use them in order to override GAS3 default settings. Lets take a closer look on some of these settings:</p>
<pre class="brush: xhtml;" title="code">
baseoutputdir=&quot;../mycrm-flex-domain/src-autogenerated&quot;</pre>
<p><br />
GAS3 generates two types of VOs, the Base class and the class extends Base. Do not touch the Base class, this class is auto-generated every-time you compile, it&rsquo;s best practice not to include it under your source control management repository. The child class is a different story, this class is simply a wrapper that you are welcome to modify. It can be used for different purposes, such as, validating setter values, annotating, in-line documentation and so on. If you were wondering, The class is also auto-generated like the Base class, Only if a copy of the class is not yet available in your code.<br />
<br />
The baseoutputdir tells GAS3 to place the base classes in a place different then my src folder.</p>
<pre class="brush: xhtml;" title="code">
entitybasetemplate=&quot;../mycrm-flex-domain/gsp/MyCRMEntityBaseTemplate.gsp&quot;
beanbasetemplate=&quot;../mycrm-flex-domain/gsp/MyCRMEntityBaseTemplate.gsp&quot;</pre>
<p><br />
GAS3 uses Groovy templates to convert Java to AS3 classes. GSP (Groovy Server Page) code is used in these templates. GSP is very similar to JSP or any other script language you&rsquo;ve probably used in the past. By writing your own templates or modifying the existing ones you can modify the generated AS3 classes to suit your needs. You can insert your custom code remarks or apply your own logic on the conversion process. The default templates maybe found under GAS3 distribution (look for *.gsp file name extension). I made some modifications to the basic templates.<br />
<br />
When the build is ready and configured, run mvn clean install. If everything goes well, a new SWC will be created for the mycrm-flex-domain project. This SWC will be used by any Flex project that needs to talk with MyCRM server. The SWC maybe used in conjunction with BlazeDS, SOAP, REST or any other integration layer we would like to use.</p>
<p>&nbsp;</p>
<p><em>This article was also published on my blog </em><a href="http://www.flexonjava.net/"><em>flexonjava.net</em></a></p>
<p>&nbsp;</p>
<p><em>Special thanks to </em><a href="http://www.tikalk.com/users/gad"><em>Gad</em></a><em> who worked with me on this.</em></p>
