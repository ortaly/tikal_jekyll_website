---
layout: post
title: Automated DTO Generation with Maven and GAS3
created: 1289076720
author: liorb
permalink: /automated-dto-generation-maven-and-gas3
tags:
- Flex Java
---
<a href="http://1.bp.blogspot.com/_tECzk8Tdl88/TNXB7iQLcQI/AAAAAAAAAKw/iPBgVt2xTq0/s1600/mavenlogo_builtby_w.gif" onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5536544545472999682" src="http://1.bp.blogspot.com/_tECzk8Tdl88/TNXB7iQLcQI/AAAAAAAAAKw/iPBgVt2xTq0/s400/mavenlogo_builtby_w.gif" style="cursor: pointer; float: left; height: 40px; margin: 0pt 10px 10px 0pt; width: 120px;" /></a><br /><span style="font-style: italic;">Update: this tutorial is now updated, it now uses the recently new Flex Mojos GDS integration</span><br /><br />In Recent years Flex has become the ideal client solution for Java server based projects. Flex complements Java in many ways and has many similarities to Java. These include, the syntax, the OOP approach and many other features of the two languages that are similar.<br /><br />In this tutorial, I will demonstrate one aspect of  the Flex Java integration by covering the earliest stage of the development process, which is the build and infrastructure creation. In future posts I will cover later stages of the development.<br /><br /><span style="font-style: italic; font-weight: bold;">VO\DTO Generation</span><br />The VO generation process converts the existing server side entity classes to client side entity classes. At the end of the process each server side DTO\Entity class will have a client side corresponding class, enabling easy communication between the client and server.<br /><br /><span style="font-style: italic; font-weight: bold;">Using Flexmojos and GAS3 to Generate AS3</span><br /><a href="http://www.graniteds.org/confluence/display/DOC/3.+Gas3+Code+Generator">GAS3</a> is one the modules of <a href="http://www.graniteds.org/confluence/pages/viewpage.action?pageId=229378">GraniteDS</a>, GDS is a comprehensive Flex remoting framework which will not be covered in this post. GAS3 is responsible for the Java to AS3 VO (or DTO) generation, it reads the domain Java objects and generates the corresponding AS classes. Usually GAS3 is used in conjunction with other GraniteDS modules. However, as I'm about to demonstrate, GAS3 can also be used separately from GDS in conjunction with different remoting frameworks such as BlazeDS or even different integration layers  like SOAP and  REST services.<br /><br />GAS3 is created on top of the Groovy templates. It can be customized and used to generate different  derivatives of Vos.<br /><br /><span style="font-style: italic; font-weight: bold;">MyCRM Sample Application</span><br />The sample mini application shown below, is a CRM app (MyCRM). responsible for managing customer information ,it contains three sub projects, as follows:<br /><ul><li><span style="font-weight: bold;">mycrm-core:</span> The Java server,  responsible for the server side business logic. In our sample it contains only a number of basic entities.</li><li><span style="font-weight: bold;">mycrm-parent:</span> Maven's parent project, which serves as a parent POM.</li><li><span style="font-weight: bold;">mycrm-flex-domain:</span> The Flex side of the domain objects, packaged as an SWC which may be used by any Flex application.</li></ul>The entire code for the sample application may be downloaded from <a href="https://github.com/liorboord/flexonjava/tree/master/mycrm">github</a><br /><br /><span style="font-style: italic; font-weight: bold;">The GAS3 Flexmojos Generate Goal</span><br />In the pom.xml under mycrm-flex-domain, the following section is responsible for the GAS3 operation:<br /><br /><pre style="background-color: #eeeeee; border: 1px dashed rgb(153, 153, 153); color: black; font-family: Andale Mono,Lucida Console,Monaco,fixed,monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;"><code><plugin><br /><groupId>org.sonatype.flexmojos</groupId><br /><artifactId>flexmojos-maven-plugin</artifactId><br /><version>3.6</version><br /><executions><br />    <execution><br />        <goals><br />            <goal>generate</goal><br />        </goals><br />        <configuration><br />            <entityTemplate><br />                <template>${project.basedir}/../mycrm-flex-domain/gsp/MyCRMEntityBaseTemplate.gsp</template><br />                <template>${project.basedir}/../mycrm-flex-domain/gsp/MyCRMEntityTemplate.gsp</template><br />            </entityTemplate><br />            <includeJavaClasses><br />                <includeClass>*net.flexonjava.examples.mycrm.domain*</includeClass><br />            </includeJavaClasses><br />            <outputDirectory>${project.basedir}/../mycrm-flex-domain/src/main/flex</outputDirectory><br />            <baseOutputDirectory>${project.basedir}/../mycrm-flex-domain/src/main/flex-autogenerated</baseOutputDirectory><br />        </configuration><br />    </execution><br /></executions><br /></plugin></code></pre><br />Many of the tags above are overrides for the default configurations, you can use them in order to override GAS3 default settings. Lets take a closer look on some of these settings:<br /><pre style="background-color: #eeeeee; border: 1px dashed rgb(153, 153, 153); color: black; font-family: Andale Mono,Lucida Console,Monaco,fixed,monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;"><code><entityTemplate><br /><template>${project.basedir}/../mycrm-flex-domain/gsp/MyCRMEntityBaseTemplate.gsp</template><br /><template>${project.basedir}/../mycrm-flex-domain/gsp/MyCRMEntityTemplate.gsp</template><br /></entityTemplate></code></pre><br />GAS3 generates two types of VOs, the Base<entityname> class and the <span style="font-style: italic;"><entityname> class extends Base<entityname></entityname></entityname></span>. Do not touch the Base class, this class is auto-generated every-time you compile, it’s best practice not to include it under your source control management repository. The child<span style="font-style: italic;"><entityname> </entityname></span>class is a different story, this class is simply a wrapper that you are welcome to modify. It can be  used for different purposes, such as, validating setter values, annotating, in-line documentation and so on. If you were wondering,  The <span style="font-style: italic;"><entityname> </entityname></span>class is also auto-generated like the Base class, Only if a copy of the class is not yet available in your code.<br /><br />The baseoutputdir tells GAS3 to place the base classes in a place different then my src folder.<br /></entityname><br /><pre style="background-color: #eeeeee; border: 1px dashed rgb(153, 153, 153); color: black; font-family: Andale Mono,Lucida Console,Monaco,fixed,monospace; font-size: 12px; line-height: 14px; overflow: auto; padding: 5px; width: 100%;"><code><baseOutputDirectory>${project.basedir}/../mycrm-flex-domain/src/main/flex-autogenerated</baseOutputDirectory></code></pre><br />GAS3 uses Groovy templates to convert Java to AS3 classes. GSP (Groovy Server Page) code is used in these templates. GSP is very similar to JSP or any other script language you’ve probably used in the past. By writing your own templates or modifying the existing ones you can modify the generated AS3 classes to suit your needs. You can insert your custom code remarks or apply your own logic on the conversion process.  The default templates maybe found under GAS3 distribution (look for *.gsp file name extension). I made some modifications to the basic templates.<br /><br />Once the build is ready and configured, run <span style="font-style: italic; font-weight: bold;">mvn clean install</span>. If everything goes well, a new SWC will be created for the mycrm-flex-domain project. This SWC will be used by any Flex project that needs to talk with MyCRM server. The SWC maybe used in conjunction with BlazeDS, SOAP, REST or any other integration layer we would like to use.
