---
layout: post
title: Parallel Batch Job in our application using grid computing and SpringBatch
created: 1230210093
author: yanai
permalink: /java/parallel-batch-job-our-application-using-grid-computing-and-springbatch
tags:
- JAVA
- GridGain grid-computing Batch
---
<p> 	 	 	 </p><p align="justify" style="margin-bottom: 0in;">Hi,</p> <p align="justify" style="margin-bottom: 0in;">Just wanted to share with you one of the design issues Shalom and myself worked on DT &ndash; How to parallel Batch Job in our application ?</p> <p align="justify" style="margin-bottom: 0in;">In DT have been using SpringBatch as our framework for executing and managing batch jobs, and we are quite happy with it. However, SpringBatch in its current version lacks the support for parallelism - Whenever a job is been executed, all the work is been done through one thread for all its steps. SpringBatch 2.0 brings the support for parallel jobs, through &ldquo;split and aggregate&rdquo; (SpringBatch jargon for map/reduce) the Step.</p> <p align="justify" style="margin-bottom: 0in;">Nevertheless, SpringBatch is **NOT** a Grid competing framework &ndash; It does **NOT** support many of the complected issues for parallelism like node discovery, node topology, job collision, fail-over, node management, job stealing and many other issues regard to grid computing.</p> <p align="justify" style="margin-bottom: 0in;">We decided to take 2 action:</p> <ol><li><p align="justify" style="margin-bottom: 0in;">Use the SpringBatch 	2.0 interfaces by leveraging to SpringBatch 2.0 M3.</p></li><li><p align="justify" style="margin-bottom: 0in;">Implement the 	interfaces in our application by delegating the split and reduce api 	from SpringBatch to GridGain.</p></li></ol> <blockquote style="margin-left: 0in; text-align: justify;">Now the infrastructure became powered by GridGain ( <a href="http://gridgain.com/">http://gridgain.com/</a> ) to support parallelism for SpringBatch jobs, and other tasks like Match&amp;Merge, crawling etc. <br />GridGain will boost our system scalability, and enable us to run tasks in parallel, coordinate and manage them (through JMX). This parallelism is achieved using the map/reduce paradigm (at heart of Gridgain), and wrapped with the SpringBatch partition interfaces package. Thus, SpringBatch split the step to sub steps and aggregated at the end, but under the cover of the SpringBatch delegates the work to GridGain. GridGain&nbsp; will map GridGain jobs to the available nodes and reduce the result at the end, delegating it back to SpringBatch to be the step outcome.<br /><br />What does it mean ? It means we can execute jobs/tasks/calculations easily in multi JVM (both on the same computer or on different computers) or in the same JVM in many environment - JUnit, CommandLine, JBoss, Integration-Test. The configuration of the parallelism is done using Spring - This includes discovery of other nodes, topology of the nodes, collision configuration, job stealing , monitoring trough JMX and many many more features GridGain provide with many service provider interfaces already supplied by the framework.<br />The introduction of GridGain will enable us control many aspect of parallelism (number of sub threads, number of processes, collision detection etc) in the POC and achieve best fine tuning of the infrastructure, again, without changing the code. It will help us to scale CPU bound tasks (like Match&amp;Merge) and IO bound tasks (like email refinery) in common and convenient way.</blockquote><blockquote style="margin-left: 0in; text-align: justify;">Thank you,<br type="_moz" /></blockquote><blockquote style="margin-left: 0in; text-align: justify;">Yanai<br type="_moz" /></blockquote><p>&nbsp;</p>
