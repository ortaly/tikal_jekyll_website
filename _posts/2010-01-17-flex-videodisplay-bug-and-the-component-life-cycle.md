---
layout: post
title: Flex VideoDisplay Bug and The Component Life Cycle
created: 1263760080
author: liorb
permalink: /flex-videodisplay-bug-and-component-life-cycle
tags:
- Flex Java
---
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_tECzk8Tdl88/S1N8Hk9K_ZI/AAAAAAAAAGM/2M3ONCS73-Y/s1600-h/fb_logo.jpg"><img style="margin: 0pt 10px 10px 0pt; float: left; cursor: pointer; width: 96px; height: 96px;" src="http://2.bp.blogspot.com/_tECzk8Tdl88/S1N8Hk9K_ZI/AAAAAAAAAGM/2M3ONCS73-Y/s400/fb_logo.jpg" alt="" id="BLOGGER_PHOTO_ID_5427818445532757394" border="0" /></a><br />We ran into this strange problem at work this week, we were dealing with a Component class that uses the <a href="http://www.adobe.com/livedocs/flex/3/langref/mx/controls/VideoDisplay.html#cuePointManagerClass">VideoDisplay</a> component in Flex in order to play video. The class was unfortunately not consistent with the Flex Component life cycle guidelines. Working with the class, I wanted to be able to use the CuePointManager so I had to first set the property <span style="font-weight: bold; font-style: italic;">VideoDisplay.cuePointManagerClass</span>. The problem was that even though I set this member, when examining the VideoDisplay instance in the debugger I got <span style="font-weight: bold; font-style: italic;">cuePointManagerClass=null</span>. When I examined the <span style="font-weight: bold; font-style: italic;">VideoDispaly</span> class I found the problem, the VideoDisplay code constructs the CuePointManager in a method that is called from <span style="font-weight: bold; font-style: italic;">CreateChildren  </span>the name of that method is <span style="font-weight: bold; font-style: italic;">createVideoPlayer</span>.<br /><br /><pre style="border: 1px dashed rgb(204, 204, 204); padding: 0px; background: rgb(240, 240, 240) url(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif) repeat scroll 0% 0%; overflow: auto; font-family: arial; font-size: 12px; width: 99%; height: auto; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; color: rgb(0, 0, 0); text-align: left; line-height: 20px;"><code style="color: rgb(0, 0, 0); word-wrap: normal;">1:  private function createVideoPlayer():void<br />2:  {<br />3:     .<br />4:     if (cuePointManagerClass)<br />5:     {<br />6:        _cuePointManager = new cuePointManagerClass(videoPlayer);<br />7:        _cuePointManager.videoDisplay = this;<br />8:     }<br />9:     .<br />10:  }<br /></code></pre><br />The setter cuePointManagerClass simply states:<br /><br /><pre style="border: 1px dashed rgb(204, 204, 204); padding: 0px; background: rgb(240, 240, 240) url(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif) repeat scroll 0% 0%; overflow: auto; font-family: arial; font-size: 12px; width: 99%; height: auto; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; color: rgb(0, 0, 0); text-align: left; line-height: 20px;"><code style="color: rgb(0, 0, 0); word-wrap: normal;">1:  public function set cuePointManagerClass(value:Class):void<br />2:  {<br />3:     _cuePointManagerClass = value;<br />4:  }<br /></code></pre><br />In our scenario the above setter was called after the <span style="font-weight: bold; font-style: italic;">VideoDisplay </span>class was added to the parent component, therefore, the class <span style="font-weight: bold; font-style: italic;">createChildren </span>method followed by <span style="font-weight: bold; font-style: italic;">createVideoPlayer</span> were already called, the setter did not invoke any invalidation method that could invoke <span style="font-weight: bold;">createVideoPlayer </span>and would make sure the <span style="font-style: italic;">cuePointManager </span>is instantiated. Although this is a bug, we can avoid running into it if we stick to the Adobe's Component codding conventions. The component life cycle docs and code samples hints that you should first instantiate and set all members of a new child and then add it using <span style="font-weight: bold; font-style: italic;">addChild</span><br /><br />What are the lessons to be learned here?<br /><br /><ol><li>Like any other engineering product, Flex SDK has bugs.</li><li>Following Adobe's codding conventions will help you avoid running into troubles.</li></ol>
