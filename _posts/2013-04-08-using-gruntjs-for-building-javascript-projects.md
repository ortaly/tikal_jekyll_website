---
layout: post
title: Using GruntJS for building JavaScript Projects
created: 1365429556
author: assafg
permalink: using-gruntjs-for-building-javascript-projects
tags:
- JS
- Javascript
- build
---
<p>I stumbled into <a href="http://gruntjs.com/">Grunt</a> a while ago but only recently I got a chance to play around with it and integrate it into a NodeJS project.</p>
<p>Grunt is described by its developers as &quot;The JavaScript Task Runner&quot;. I like to refer to it as Ant for JavaScript. It follows a similar &quot;Task&quot; oriented approach with a rich library of configurable tasks. It has quite a vast verity of predefined tasks (&quot;plugins&quot;) &ndash; some are provided by the core team and lots are contributed by open source developers. There are plugins for linting, uglifying, compressing, running tests and more. The full lest of tasks can be found <a href="http://gruntjs.com/plugins">here</a>.</p>
<p>Writing custom task is also pretty simple and straight forward, Especially with the grunt utilities. Here is an example of a custom plugin that performs Git commits:</p>
<p>&nbsp;</p>
<pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; border: 0px; font-family: Consolas, 'Liberation Mono', Courier, monospace; color: rgb(51, 51, 51); line-height: 16px;">
</pre>
<div class="line" id="LC11" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">module</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">exports</span> <span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">=</span> <span class="kd" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">function</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">(</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">grunt</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">)</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">{</span></div>
<div class="line" id="LC12" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">grunt</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">registerMultiTask</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">(</span><span class="s1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 17, 68);">&#39;git&#39;</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">,</span> <span class="s1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 17, 68);">&#39;Execute git commands.&#39;</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">,</span> <span class="kd" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">function</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">()</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">{</span></div>
<div class="line" id="LC13" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 136); font-style: italic;">// Merge task-specific and/or target-specific options with these defaults.</span></div>
<div class="line" id="LC14" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">var</span> <span class="nx" style="margin: 0px; padding: 0px; border: 0px;">options</span> <span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">=</span> <span class="k" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">this</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">options</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">({</span></div>
<div class="line" id="LC15" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">command</span><span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">:</span> <span class="s1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 17, 68);">&#39;commit&#39;</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">,</span></div>
<div class="line" id="LC16" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">message</span><span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">:</span> <span class="s1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 17, 68);">&#39;Commit&#39;</span></div>
<div class="line" id="LC17" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p" style="margin: 0px; padding: 0px; border: 0px;">});</span></div>
<div class="line" id="LC18" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;</div>
<div class="line" id="LC19" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;</div>
<div class="line" id="LC20" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">if</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">(</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">options</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">command</span> <span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">===</span> <span class="s1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 17, 68);">&#39;commit&#39;</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">)</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">{</span></div>
<div class="line" id="LC21" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">var</span> <span class="nx" style="margin: 0px; padding: 0px; border: 0px;">done</span> <span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">=</span> <span class="k" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">this</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">async</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">();</span></div>
<div class="line" id="LC22" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;</div>
<div class="line" id="LC23" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">var</span> <span class="nx" style="margin: 0px; padding: 0px; border: 0px;">addFile</span> <span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">=</span> <span class="kd" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">function</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">(</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">file</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">,</span> <span class="nx" style="margin: 0px; padding: 0px; border: 0px;">cb</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">)</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">{</span></div>
<div class="line" id="LC24" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">grunt</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">util</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">spawn</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">({</span></div>
<div class="line" id="LC25" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">cmd</span><span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">:</span> <span class="s2" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 17, 68);">&quot;git&quot;</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">,</span></div>
<div class="line" id="LC26" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">args</span><span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">:</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">[</span><span class="s2" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 17, 68);">&quot;add&quot;</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">,</span> <span class="nx" style="margin: 0px; padding: 0px; border: 0px;">file</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">src</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">]</span></div>
<div class="line" id="LC27" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p" style="margin: 0px; padding: 0px; border: 0px;">},</span> <span class="nx" style="margin: 0px; padding: 0px; border: 0px;">cb</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">);</span></div>
<div class="line" id="LC28" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p" style="margin: 0px; padding: 0px; border: 0px;">};</span></div>
<div class="line" id="LC29" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;</div>
<div class="line" id="LC30" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">grunt</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">util</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">async</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">forEach</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">(</span><span class="k" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">this</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">files</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">,</span> <span class="nx" style="margin: 0px; padding: 0px; border: 0px;">addFile</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">,</span> <span class="kd" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">function</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">(</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">err</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">)</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">{</span></div>
<div class="line" id="LC31" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">grunt</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">util</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">spawn</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">({</span></div>
<div class="line" id="LC32" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">cmd</span><span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">:</span> <span class="s2" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 17, 68);">&quot;git&quot;</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">,</span></div>
<div class="line" id="LC33" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">args</span><span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">:</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">[</span><span class="s2" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 17, 68);">&quot;commit&quot;</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">,</span> <span class="s2" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 17, 68);">&quot;-m&quot;</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">,</span> <span class="nx" style="margin: 0px; padding: 0px; border: 0px;">options</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">message</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">]</span></div>
<div class="line" id="LC34" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p" style="margin: 0px; padding: 0px; border: 0px;">},</span> <span class="kd" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">function</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">(</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">err</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">)</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">{</span></div>
<div class="line" id="LC35" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">done</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">(</span><span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">!</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">err</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">);</span></div>
<div class="line" id="LC36" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p" style="margin: 0px; padding: 0px; border: 0px;">});</span></div>
<div class="line" id="LC37" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p" style="margin: 0px; padding: 0px; border: 0px;">});</span></div>
<div class="line" id="LC38" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p" style="margin: 0px; padding: 0px; border: 0px;">}</span> <span class="k" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">else</span> <span class="p" style="margin: 0px; padding: 0px; border: 0px;">{</span></div>
<div class="line" id="LC39" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx" style="margin: 0px; padding: 0px; border: 0px;">grunt</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">log</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">error</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">(</span><span class="s1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 17, 68);">&#39;No or unknown command specified: &#39;</span> <span class="o" style="margin: 0px; padding: 0px; border: 0px; font-weight: bold;">+</span> <span class="nx" style="margin: 0px; padding: 0px; border: 0px;">options</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">.</span><span class="nx" style="margin: 0px; padding: 0px; border: 0px;">command</span><span class="p" style="margin: 0px; padding: 0px; border: 0px;">);</span></div>
<div class="line" id="LC40" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p" style="margin: 0px; padding: 0px; border: 0px;">}</span></div>
<div class="line" id="LC41" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;<span class="p" style="margin: 0px; padding: 0px; border: 0px;">});</span></div>
<div class="line" id="LC42" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	&nbsp;</div>
<div class="line" id="LC43" style="margin: 0px; padding: 0px 0px 0px 10px; border: 0px;">
	<span class="p" style="margin: 0px; padding: 0px; border: 0px;">};</span></div>
<p>Full plugin can be found <a href="https://github.com/rubenv/grunt-git">here</a><br />
	* Notice how simple it is to spawn command line (external) tasks.</p>
<p>Another point in favor of Grunt is the good documentation &amp; tutorial that have become quite rare in the JS Jungle.</p>
<p>To conclude this short overview &ndash; I will defiantly use Grunt in future client JS and Node JS &nbsp;projects.</p>
