---
layout: post
title: 'STS with Maven - java.lang.OutOfMemoryError: Java heap space'
created: 1309083840
author: liorb
permalink: /sts-maven-javalangoutofmemoryerror-java-heap-space
tags:
- Flex Java
---
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/-ekb4pUxpPz0/TgeJUwd1l1I/AAAAAAAAAO0/cZ2lYmUwJtY/s1600/springsource-logo.jpg"><img style="float:left; margin:0 10px 10px 0;cursor:pointer; cursor:hand;width: 78px; height: 78px;" src="http://2.bp.blogspot.com/-ekb4pUxpPz0/TgeJUwd1l1I/AAAAAAAAAO0/cZ2lYmUwJtY/s400/springsource-logo.jpg" alt="" id="BLOGGER_PHOTO_ID_5622613649495791442" border="0" /></a><br />I've recently started using SpringSource Tool Suite (STS) for a large Flex on Java project, In the recent configuration I used eclipse to code and launched Maven using command line. STS provides a built in Maven launcher which really makes more sense to use (STS use m2eclipse to fully integrate maven with eclipse). The only problem is that once I tried to run mvn clean install I ran into the good old heap space issue:<div><br /><pre style="font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; color: #000000; background-color: #eee;font-size: 12px;border: 1px dashed #999999;line-height: 14px;padding: 5px; overflow: auto; width: 100%"><code>java.lang.OutOfMemoryError: Java heap space<br />at java.io.BufferedWriter.(BufferedWriter.java:87)<br />at java.io.BufferedWriter.(BufferedWriter.java:70)<br />at java.io.PrintStream.init(PrintStream.java:83)<br />at java.io.PrintStream.(PrintStream.java:100)<br />at java.io.PrintStream.(PrintStream.java:62)<br />at org.aspectj.weaver.bcel.LazyClassGen.toLongString(LazyClassGen.java:764)<br />at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1837)<br />at org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump(BcelWeaver.java:1755)<br />at org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify(BcelWeaver.java:1515)<br />at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1322)<br />at org.aspectj.ajdt.internal.compiler.AjPipeliningCompilerAdapter.weaveQueuedEntries(AjPipeliningCompilerAdapter.java:435)<br />at org.aspectj.ajdt.internal.compiler.AjPipeliningCompilerAdapter.queueForWeaving(AjPipeliningCompilerAdapter.java:371)<br />at org.aspectj.ajdt.internal.compiler.AjPipeliningCompilerAdapter.afterProcessing(AjPipeliningCompilerAdapter.java:358)<br />at org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$after$org_aspectj_ajdt_internal_compiler_CompilerAdapter$5$6b855184(CompilerAdapter.aj:98)<br />at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:652)<br />at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:392)<br />at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:1007)<br />at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performBuild(AjBuildManager.java:268)<br />at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:182)<br />at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:112)<br />at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:60)<br />at org.aspectj.tools.ajc.Main.run(Main.java:355)<br />at org.aspectj.tools.ajc.Main.runMain(Main.java:234)<br />at org.codehaus.mojo.aspectj.AbstractAjcCompiler.execute(AbstractAjcCompiler.java:378)<br />at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)<br />at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)<br />at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)<br />at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)<br />at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)<br />at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)<br />at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)<br />at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)<br /></code></pre><div><br /></div><div>The solution obviously is to increase the maximum heap size which is represented by the JVM -Xmx argument. Now there are a number of places you can find this argument (STS.ini is one of them) , but here's the one place I found that really makes the difference. </div><div><br /></div><div><ul><li>Goto the 'Run Configurations' popup of the current maven run you are trying to use (can be accesed by right clicking your project and selecting 'Run As')</li><li>Select your current run under 'Maven Build' in the tree</li><li>Select the the JVM tab and add your requested -Xmx settings (I chose -Xmx512m)</li><li>Press 'Apply' and 'Run'</li></ul></div><a href="http://4.bp.blogspot.com/-iFaoJDCIn8s/Tgcqlc656EI/AAAAAAAAAOs/Dx9ai00M6kY/s1600/jre-settings.png"><img style="float:left; margin:0 10px 10px 0;cursor:pointer; cursor:hand;width: 396px; height: 400px;" src="http://4.bp.blogspot.com/-iFaoJDCIn8s/Tgcqlc656EI/AAAAAAAAAOs/Dx9ai00M6kY/s400/jre-settings.png" alt="" id="BLOGGER_PHOTO_ID_5622509482702137410" border="0" /></a><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div>You should now be able to run your Maven project.</div>
