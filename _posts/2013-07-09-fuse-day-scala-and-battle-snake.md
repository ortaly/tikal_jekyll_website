---
layout: post
title: Fuse Day, Scala & Battle Snake!
created: 1373361121
author: nimrod
permalink: /java/fuse-day-scala-battle-snake
tags:
- JAVA
- Scala
- Java
- Akka
- Game
- Multiplayer
- Fuseday
---
<p><img alt="" src="http://www.fromoldbooks.org/DelamotteOrnamentalAlphabets/tn/051-16th-Century-letter-t-q85-468x500.jpg" style="width: 110px; height: 117px; float: left;" /><span style="font-size: 14px;">his Fuse Day, the Java group was concentrating on <a href="http://akka.io/">Akka</a>&nbsp;for creating highly concurrent and scalable code. A multiplayer online game was selected a</span><span style="font-size: 14px;">s an interesting and fun mini-project for the day, and&nbsp;</span><span style="font-size: 14px;">the Typesafe stack of the <a href="http://www.playframework.com/">Play Framework</a></span><span style="font-size: 14px;">, Akka and Scala/Java was the main focus of development. As I felt some people would be interested in the Scala side of things but have never tried it before, I suggested creating a sub-group that would only deal with Scala, and leave Akka for those more versed in the language or using Java instead.</span></p>
<p><span style="font-size: 14px;">In preparation for the Fuse Day, I conducted a preliminary crash course in Scala that consisted of three concentrated hours, where I gave a rough presentation of what Scala is, what the basic syntax looks like, and also a few tricks such as Stackable Modification Traits.</span></p>
<p><span style="font-size: 14px;">In preparation for the Fuse Day, The other group leaders and I tried to establish the API by which the different groups would communicate. This was especially important for the integration between the Java/Scala sub-groups, since we didn&#39;t want the Java sub-group to have to install Scala as part of their stack to get the whole thing to compile. Naturally, then, we ended up creating the API on the day itself.</span></p>
<p><span style="font-size: 14px;"><img alt="" src="http://www.upsidedownbird.com/wp-content/uploads/2013/05/737890_10151220985711378_1745224235_o.jpg" style="width: 300px; height: 300px; margin-left: 100px; margin-right: 100px;" /></span></p>
<p><span style="font-size: 14px;">The chosen multiplayer game was Battle Snake! - a classic snake game, where each player would have his own snake on the board, and would try to get the other players&#39; snakes killed by making them bumping into its tail, the walls or other snakes. The rest of the game rules would be the same as the well-known game, we said, which later on spurred some debate on what those rules actually were.</span></p>
<p><span style="font-size: 14px;">To begin with, in an effort to spare the Java sub-group from the oh-so-terrible Scala dependancy, we set out to implement the model objects in Java, so we could then use them in our Scala code. This yielded a few classes such as Board, Snake, Fruit and Wall. Each of these were POJOs with your run of the mill fields, setters and getters, implementing an interface we called BoardElement. The Snake was comprised of a head and a tail, each of which was a Point, where the tail was comprised of BodyElements, each a single point on the board, pointing to the previous tail part. The Snake also held an enum value - Direction - which pointed to the direction in which the snake was advancing.</span></p>
<p><span style="font-size: 14px;">When starting to build the Scala code, it was immediately apparent to me that Java programmers tend to try to write Java using Scala. This leads to code that is much less concise and more messy than it had to have been, since Scala provides us with some interesting ways of changing the syntactic representation of our code without changing the semantics, but making the code more readable. Even things like unnecessary semicolons took a while to root out.</span></p>
<p><span style="font-size: 14px;">After a bit of code wrangling, we came up with a few cool things. Nested <span style="font-family:courier new,courier,monospace;">for</span>s became a single <span style="font-family:courier new,courier,monospace;">for</span> with multiple Ranges:</span></p>
<p><span style="font-family:courier new,courier,monospace;"><span style="font-size:14px;"><span class="k" style="font-weight: bold;">for</span> <span class="o" style="font-weight: bold;">(</span><span class="n">x</span> <span class="k" style="font-weight: bold;">&lt;-</span> <span class="mi" style="color: rgb(0, 153, 153);">0</span> <span class="n">until</span> <span class="n">boardWidth</span><span class="o" style="font-weight: bold;">;</span> <span class="n">y</span> <span class="k" style="font-weight: bold;">&lt;-</span> <span class="mi" style="color: rgb(0, 153, 153);">0</span> <span class="n">until</span> <span class="n">boardHeight</span><span class="o" style="font-weight: bold;">)</span> <span class="o" style="font-weight: bold;">{</span></span></span></p>
<pre style="font-family: Consolas, 'Liberation Mono', Courier, monospace; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); line-height: 18px;">
</pre>
<div class="line" id="LC25" style="padding-left: 10px;">
	<span style="font-family:courier new,courier,monospace;"><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">board</span><span class="o" style="font-weight: bold;">.</span><span class="n">put</span><span class="o" style="font-weight: bold;">(</span><span class="k" style="font-weight: bold;">new</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="mi" style="color: rgb(0, 153, 153);">0</span><span class="o" style="font-weight: bold;">,</span><span class="n">y</span><span class="o" style="font-weight: bold;">),</span><span class="n">wall</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC26" style="padding-left: 10px;">
	<span style="font-family:courier new,courier,monospace;"><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">board</span><span class="o" style="font-weight: bold;">.</span><span class="n">put</span><span class="o" style="font-weight: bold;">(</span><span class="k" style="font-weight: bold;">new</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">x</span><span class="o" style="font-weight: bold;">,</span><span class="mi" style="color: rgb(0, 153, 153);">0</span><span class="o" style="font-weight: bold;">),</span><span class="n">wall</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC27" style="padding-left: 10px;">
	<span style="font-family:courier new,courier,monospace;"><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">board</span><span class="o" style="font-weight: bold;">.</span><span class="n">put</span><span class="o" style="font-weight: bold;">(</span><span class="k" style="font-weight: bold;">new</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">boardWidth</span><span class="o" style="font-weight: bold;">-</span><span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">,</span><span class="n">y</span><span class="o" style="font-weight: bold;">),</span><span class="n">wall</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC28" style="padding-left: 10px;">
	<span style="font-family:courier new,courier,monospace;"><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">board</span><span class="o" style="font-weight: bold;">.</span><span class="n">put</span><span class="o" style="font-weight: bold;">(</span><span class="k" style="font-weight: bold;">new</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">x</span><span class="o" style="font-weight: bold;">,</span><span class="n">boardHeight</span><span class="o" style="font-weight: bold;">-</span><span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">),</span><span class="n">wall</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC29" style="padding-left: 10px;">
	<span style="font-family:courier new,courier,monospace;"><span style="font-size:14px;"><span class="o" style="font-weight: bold;">}</span></span></span></div>
<p><span style="font-family:arial,helvetica,sans-serif;"><span style="font-size:14px;">In this loop, the x and y variables are both initialized to the board height and width (the board is square), and wall points are created at the edges. The&nbsp;<em>until</em> keyword seen between the zero and the board width or height is not a keyword at all, but a function. Scala allows a function to be invoked in either form - <span style="font-family:courier new,courier,monospace;">a.func(b)</span> or <span style="font-family:courier new,courier,monospace;">a func b</span>. The latter provides a way to create natural looking DSLs without the noise of the supporting language. The <span style="font-family:courier new,courier,monospace;">until</span> function creates a <span style="font-family:courier new,courier,monospace;">Range</span> object with values ranging from the left operand to the right operand not inclusive.</span></span></p>
<p><font face="arial, helvetica, sans-serif"><span style="font-size: 14px;">When developing the snake advancement algorithm, it was necessary to move the head point to the next point on the board, in the direction pointed by the Direction enum value. This started out as some nasty code:</span></font></p>
<p><span style="font-family:courier new,courier,monospace;"><span style="font-size: 14px;"><strong>if</strong> <strong>(</strong>dir ==&nbsp;</span></span><span class="nc" style="font-size: 14px; color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-size: 14px; font-weight: bold;">.</span><span class="nc" style="font-size: 14px; color: rgb(68, 85, 136); font-weight: bold;">UP</span><span style="font-family:courier new,courier,monospace;"><span style="font-size: 14px;"><strong>)</strong> nextPoint = <strong>new&nbsp;</strong></span></span><span style="color: rgb(68, 85, 136); font-family: 'courier new', courier, monospace; font-size: 14px; font-weight: bold;">Point</span><span style="font-family:courier new,courier,monospace;"><span style="font-size: 14px;"><strong>(</strong>head.x, head.y - 1<strong>)</strong><br />
	<strong>if</strong> <strong>(</strong>dir ==&nbsp;</span></span><span class="nc" style="font-size: 14px; color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-size: 14px; font-weight: bold;">.</span><span class="nc" style="font-size: 14px; color: rgb(68, 85, 136); font-weight: bold;">LEFT</span><span style="font-family:courier new,courier,monospace;"><span style="font-size: 14px;"><strong>)</strong> nextPoint = <strong>new</strong>&nbsp;</span></span><span style="color: rgb(68, 85, 136); font-family: 'courier new', courier, monospace; font-size: 14px; font-weight: bold;">Point</span><span style="font-family:courier new,courier,monospace;"><span style="font-size: 14px;"><strong>(</strong>head.x - 1, head.y<strong>)</strong><br />
	...</span></span></p>
<p><font face="arial, helvetica, sans-serif"><span style="font-size: 14px;">This quickly changed to use <span style="font-family:courier new,courier,monospace;">match</span> instead:</span></font></p>
<p><span class="n" style="font-size: 14px; font-family: 'courier new', courier, monospace;">dir</span><span style="font-size: 14px; font-family: 'courier new', courier, monospace;">&nbsp;</span><span class="k" style="font-size: 14px; font-family: 'courier new', courier, monospace; font-weight: bold;">match</span><span style="font-size: 14px; font-family: 'courier new', courier, monospace;">&nbsp;</span><span class="o" style="font-size: 14px; font-family: 'courier new', courier, monospace; font-weight: bold;">{</span></p>
<div class="line" id="LC8" style="padding-left: 10px;">
	<span style="font-family: 'courier new', courier, monospace;"><span style="font-size: 14px;">&nbsp; &nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">.</span><span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">LEFT</span>&nbsp;<span class="k" style="font-weight: bold;">=&gt;</span>&nbsp;<span class="k" style="font-weight: bold;">new</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getX</span>&nbsp;<span class="o" style="font-weight: bold;">-</span>&nbsp;<span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">,</span>&nbsp;<span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getY</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC9" style="padding-left: 10px;">
	<span style="font-family: 'courier new', courier, monospace;"><span style="font-size: 14px;">&nbsp; &nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">.</span><span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">RIGHT</span>&nbsp;<span class="k" style="font-weight: bold;">=&gt;</span>&nbsp;<span class="k" style="font-weight: bold;">new</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getX</span>&nbsp;<span class="o" style="font-weight: bold;">+</span>&nbsp;<span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">,</span>&nbsp;<span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getY</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC10" style="padding-left: 10px;">
	<span style="font-family: 'courier new', courier, monospace;"><span style="font-size: 14px;">&nbsp; &nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">.</span><span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">UP</span>&nbsp;<span class="k" style="font-weight: bold;">=&gt;</span>&nbsp;<span class="k" style="font-weight: bold;">new</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getX</span><span class="o" style="font-weight: bold;">,</span>&nbsp;<span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getY</span>&nbsp;<span class="o" style="font-weight: bold;">-</span>&nbsp;<span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC11" style="padding-left: 10px;">
	<span style="font-family: 'courier new', courier, monospace;"><span style="font-size: 14px;">&nbsp; &nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">.</span><span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">DOWN</span>&nbsp;<span class="k" style="font-weight: bold;">=&gt;</span>&nbsp;<span class="k" style="font-weight: bold;">new</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getX</span><span class="o" style="font-weight: bold;">,</span>&nbsp;<span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getY</span>&nbsp;<span class="o" style="font-weight: bold;">+</span>&nbsp;<span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC12" style="padding-left: 10px;">
	<span style="font-family: 'courier new', courier, monospace;"><span style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span>&nbsp;<span class="k" style="font-weight: bold;">_</span>&nbsp;<span class="k" style="font-weight: bold;">=&gt;</span>&nbsp;<span class="n">point</span></span></span></div>
<div class="line" id="LC13" style="padding-left: 10px;">
	<span style="font-family: 'courier new', courier, monospace;"><span style="font-size: 14px;"><span class="o" style="font-weight: bold;">}</span></span></span></div>
<p><font face="arial, helvetica, sans-serif"><span style="font-size: 14px;">But still I thought the code could be a lot better. I decided that what I wanted to get to is to be able to write:</span></font></p>
<p><span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;"><span class="n" style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre;">point</span><span style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre;"> </span><span class="k" style="font-weight: bold; color: rgb(51, 51, 51); line-height: 18px; white-space: pre;">=</span><span style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre;"> </span><span class="n" style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre;">point</span><span style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre;"> </span><span class="o" style="font-weight: bold; color: rgb(51, 51, 51); line-height: 18px; white-space: pre;">+</span><span style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre;"> </span><span class="n" style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre;">direction</span></span></span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 14px;">This lead to a few more interesting Scala features. First, to be able to write <span style="font-family:courier new,courier,monospace;">point + direction</span>, I would have to write a function named<span style="font-family:courier new,courier,monospace;"> +</span>. Scala provides a much more flexible function naming scheme than Java, to the point where method invocation looks like operator overloading. However, there is no operator overloading here, no special syntax, no special keywords like operator. Just plain old function definition. Defining the function + then, would look like this:</span></p>
<p><span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;<span class="k" style="font-weight: bold;">def</span>&nbsp;<span class="o" style="font-weight: bold;">+(</span><span class="n">dir</span><span class="k" style="font-weight: bold;">:</span>&nbsp;<span class="kt" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">)</span><span class="k" style="font-weight: bold;">:</span>&nbsp;<span class="kt" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span>&nbsp;<span class="o" style="font-weight: bold;">=</span>&nbsp;<span class="o" style="font-weight: bold;">{</span></span></span></p>
<pre style="font-family: Consolas, 'Liberation Mono', Courier, monospace; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); line-height: 18px;">
</pre>
<div class="line" id="LC7" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">dir</span>&nbsp;<span class="k" style="font-weight: bold;">match</span>&nbsp;<span class="o" style="font-weight: bold;">{</span></span></span></div>
<div class="line" id="LC8" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">.</span><span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">LEFT</span>&nbsp;<span class="k" style="font-weight: bold;">=&gt;</span>&nbsp;<span class="k" style="font-weight: bold;">new</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getX</span>&nbsp;<span class="o" style="font-weight: bold;">-</span>&nbsp;<span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">,</span>&nbsp;<span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getY</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC9" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">.</span><span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">RIGHT</span>&nbsp;<span class="k" style="font-weight: bold;">=&gt;</span>&nbsp;<span class="k" style="font-weight: bold;">new</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getX</span>&nbsp;<span class="o" style="font-weight: bold;">+</span>&nbsp;<span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">,</span>&nbsp;<span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getY</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC10" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">.</span><span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">UP</span>&nbsp;<span class="k" style="font-weight: bold;">=&gt;</span>&nbsp;<span class="k" style="font-weight: bold;">new</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getX</span><span class="o" style="font-weight: bold;">,</span>&nbsp;<span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getY</span>&nbsp;<span class="o" style="font-weight: bold;">-</span>&nbsp;<span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC11" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">.</span><span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">DOWN</span>&nbsp;<span class="k" style="font-weight: bold;">=&gt;</span>&nbsp;<span class="k" style="font-weight: bold;">new</span>&nbsp;<span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getX</span><span class="o" style="font-weight: bold;">,</span>&nbsp;<span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getY</span>&nbsp;<span class="o" style="font-weight: bold;">+</span>&nbsp;<span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC12" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span>&nbsp;<span class="k" style="font-weight: bold;">_</span>&nbsp;<span class="k" style="font-weight: bold;">=&gt;</span>&nbsp;<span class="n">point</span></span></span></div>
<div class="line" id="LC13" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o" style="font-weight: bold;">}</span></span></span></div>
<div class="line" id="LC14" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;"><span class="o" style="font-weight: bold;">}</span></span></span></div>
<p><span style="font-size: 14px;">Since Scala allows method invocations that have a single parameter to be formatted as <span style="font-family:courier new,courier,monospace;">a op b</span> instead of <span style="font-family:courier new,courier,monospace;">a.op(b)</span>, our code would now look like we wanted it to. There&#39;s just one little problem. We can&#39;t add the plus method to the Point class, since it was defined in the Java code!<br />
	Scala comes to our rescue once again, with <em>Implicit Conversions</em>. This mechanism allows us to provide a conversion function from one object to another, if an operation is missing on the object on which the method is invoked. In other words, if <span style="font-family:courier new,courier,monospace;">a.b()</span> doesn&#39;t exist, Scala will look for a conversion to some class C, where <span style="font-family:courier new,courier,monospace;">c.b()</span> does exist, and will invoke it instead. We defined a class called PointOps (like Scala&#39;s StringOps) which now contains the plus function and the implicit conversion:</span></p>
<p><span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;"><span class="k" style="font-weight: bold;">&nbsp;class</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">PointOps</span><span class="o" style="font-weight: bold;">(</span><span class="k" style="font-weight: bold;">val</span> <span class="n">point</span><span class="k" style="font-weight: bold;">:</span> <span class="kt" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">)</span> <span class="o" style="font-weight: bold;">{</span></span></span></p>
<pre style="font-family: Consolas, 'Liberation Mono', Courier, monospace; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); line-height: 18px;">
</pre>
<div class="line" id="LC6" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;<span class="k" style="font-weight: bold;">def</span> <span class="o" style="font-weight: bold;">+(</span><span class="n">dir</span><span class="k" style="font-weight: bold;">:</span> <span class="kt" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">)</span><span class="k" style="font-weight: bold;">:</span> <span class="kt" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span> <span class="o" style="font-weight: bold;">=</span> <span class="o" style="font-weight: bold;">{</span></span></span></div>
<div class="line" id="LC7" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">dir</span> <span class="k" style="font-weight: bold;">match</span> <span class="o" style="font-weight: bold;">{</span></span></span></div>
<div class="line" id="LC8" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">.</span><span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">LEFT</span> <span class="k" style="font-weight: bold;">=&gt;</span> <span class="k" style="font-weight: bold;">new</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getX</span> <span class="o" style="font-weight: bold;">-</span> <span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">,</span> <span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getY</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC9" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">.</span><span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">RIGHT</span> <span class="k" style="font-weight: bold;">=&gt;</span> <span class="k" style="font-weight: bold;">new</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getX</span> <span class="o" style="font-weight: bold;">+</span> <span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">,</span> <span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getY</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC10" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">.</span><span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">UP</span> <span class="k" style="font-weight: bold;">=&gt;</span> <span class="k" style="font-weight: bold;">new</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getX</span><span class="o" style="font-weight: bold;">,</span> <span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getY</span> <span class="o" style="font-weight: bold;">-</span> <span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC11" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Direction</span><span class="o" style="font-weight: bold;">.</span><span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">DOWN</span> <span class="k" style="font-weight: bold;">=&gt;</span> <span class="k" style="font-weight: bold;">new</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">(</span><span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getX</span><span class="o" style="font-weight: bold;">,</span> <span class="n">point</span><span class="o" style="font-weight: bold;">.</span><span class="n">getY</span> <span class="o" style="font-weight: bold;">+</span> <span class="mi" style="color: rgb(0, 153, 153);">1</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC12" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k" style="font-weight: bold;">case</span> <span class="k" style="font-weight: bold;">_</span> <span class="k" style="font-weight: bold;">=&gt;</span> <span class="n">point</span></span></span></div>
<div class="line" id="LC13" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o" style="font-weight: bold;">}</span></span></span></div>
<div class="line" id="LC14" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;<span class="o" style="font-weight: bold;">}</span></span></span></div>
<div class="line" id="LC15" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;"><span class="o" style="font-weight: bold;">}</span></span></span></div>
<div class="line" id="LC16" style="padding-left: 10px;">
	&nbsp;</div>
<div class="line" id="LC17" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;"><span class="k" style="font-weight: bold;">object</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">PointOps</span><span class="o" style="font-weight: bold;">{</span></span></span></div>
<div class="line" id="LC18" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;">&nbsp;&nbsp;<span class="k" style="font-weight: bold;">implicit</span> <span class="k" style="font-weight: bold;">def</span> <span class="n">pointToPointOps</span><span class="o" style="font-weight: bold;">(</span><span class="n">value</span><span class="k" style="font-weight: bold;">:</span> <span class="kt" style="color: rgb(68, 85, 136); font-weight: bold;">Point</span><span class="o" style="font-weight: bold;">)</span><span class="k" style="font-weight: bold;">:</span> <span class="kt" style="color: rgb(68, 85, 136); font-weight: bold;">PointOps</span> <span class="o" style="font-weight: bold;">=</span> <span class="k" style="font-weight: bold;">new</span> <span class="nc" style="color: rgb(68, 85, 136); font-weight: bold;">PointOps</span><span class="o" style="font-weight: bold;">(</span><span class="n">value</span><span class="o" style="font-weight: bold;">)</span></span></span></div>
<div class="line" id="LC19" style="padding-left: 10px;">
	<span style="font-size:14px;"><span style="font-family:courier new,courier,monospace;"><span class="o" style="font-weight: bold;">}</span></span></span></div>
<p><span style="font-size:14px;">Towards the end of the Fuse Day, it was apparrent that the integration with the Akka sub-groups wouldn&#39;t happen, as we were running out of time. All in all, I believe that getting our hands dirty in some Scala code opened up some interesting prospects of its usage for most people. Personally, I&#39;m going to delve further on into Scala and try to find out just how powerful this language is.</span></p>
