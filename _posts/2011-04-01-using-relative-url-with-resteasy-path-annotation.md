---
layout: post
title: Using relative url with RESTEasy path annotation
created: 1301675100
author: liorb
permalink: /using-relative-url-resteasy-path-annotation
tags:
- Flex Java
---
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/-dhHSrFuinOM/TZX_Iny6e-I/AAAAAAAAANQ/PgxPuU4YOzw/s1600/resteasy.png"><img style="float: left; margin: 0pt 10px 10px 0pt; cursor: pointer; width: 91px; height: 69px;" src="http://4.bp.blogspot.com/-dhHSrFuinOM/TZX_Iny6e-I/AAAAAAAAANQ/PgxPuU4YOzw/s400/resteasy.png" alt="" id="BLOGGER_PHOTO_ID_5590655036036905954" border="0" /></a>I ran into the following problem in the office this week, I'm working on a WAR project that exposes multiple services of different types (SOAP, REST, AMF). The REST part was written using Jboss's RESTEasy, after I renamed the REST servlet RESTEasy's services were no longer working. I was surprised to find out that the servlet name was hard coded into the code as part of the @Path annotation content, in order to update RESTEasy with the new servlet name, I was supposed to change the annotation content in a number of classes. Luckily there's a work around for this, and it's one that in my opinion you should always use, RESTEasy lets you specify the path prefix as a context variable, all you have to do is declare it in your web.xml in the following way...<br /><br />in my code I have the following Path deceleration:<br /><pre style="font-family: Andale Mono,Lucida Console,Monaco,fixed,monospace; color: rgb(0, 0, 0); background-color: rgb(238, 238, 238); font-size: 12px; border: 1px dashed rgb(153, 153, 153); line-height: 14px; padding: 5px; overflow: auto; width: 100%;"><code>@Path("/rest-api/user")<br /></code></pre>rest-api is the servlet name, I'd like to make sure it's no longer hard coded in my application..<br /><br />I will add the "mapping prefix" into my web.xml:<br /><pre style="font-family: Andale Mono,Lucida Console,Monaco,fixed,monospace; color: rgb(0, 0, 0); background-color: rgb(238, 238, 238); font-size: 12px; border: 1px dashed rgb(153, 153, 153); line-height: 14px; padding: 5px; overflow: auto; width: 100%;"><code><web-app><br /><servlet><br />   <servlet-name>rest-servlet</servlet-name><br />   <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class><br /></servlet><br /><servlet-mapping><br />   <servlet-name>rest-servlet</servlet-name><br />   <url-pattern>/rest-api/*</url-pattern><br /></servlet-mapping><br /><context-param><br />   <param-name>resteasy.servlet.mapping.prefix</param-name><br />   <param-value>/rest-api</param-value><br /></context-param><br />.<br />.<br />.<br /></web-app><br /></code></pre>Now when I've added the mapping prefix to the web.xml I can drop the servlet name from all path annotations:<br /><pre style="font-family: Andale Mono,Lucida Console,Monaco,fixed,monospace; color: rgb(0, 0, 0); background-color: rgb(238, 238, 238); font-size: 12px; border: 1px dashed rgb(153, 153, 153); line-height: 14px; padding: 5px; overflow: auto; width: 100%;"><code>@Path("/user")<br /></code></pre>In case I'de like to rename my servlet or for some reason change a part of the service URL, all I need to do is update the mapping prefix variable in the web.xml
